<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Playwright Todo Demo</title>
    <style>
      :root {
        color-scheme: light dark;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
          sans-serif;
      }
      body {
        margin: 0;
        background: #f5f5f5;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        padding: 40px 16px;
      }
      .app {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
        width: min(520px, 100%);
        padding: 32px;
      }
      h1 {
        text-align: center;
        margin-top: 0;
      }
      .input-row {
        display: flex;
        gap: 12px;
        align-items: stretch;
        margin-bottom: 12px;
      }
      .new-todo {
        flex: 1 1 auto;
        padding: 12px 16px;
        font-size: 1rem;
        border-radius: 8px;
        border: 1px solid #d0d0d0;
      }
      .todo-list {
        list-style: none;
        padding: 0;
        margin: 24px 0;
      }
      .todo-list li {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 0;
        border-bottom: 1px solid #e6e6e6;
      }
      .todo-list li.completed label {
        text-decoration: line-through;
        color: #999;
      }
      .filters {
        display: flex;
        justify-content: center;
        gap: 12px;
      }
      .filters a {
        text-decoration: none;
        padding: 6px 12px;
        border-radius: 999px;
        border: 1px solid transparent;
        color: inherit;
      }
      .filters a.active {
        border-color: #0078d4;
        color: #0078d4;
        font-weight: 600;
      }
      .controls {
        margin-top: 16px;
      }
      .filter-text {
        width: 100%;
        padding: 10px 14px;
        font-size: 1rem;
        border-radius: 8px;
        border: 1px solid #d0d0d0;
      }
      .add-button {
        border-radius: 8px;
        border: none;
        background: #0078d4;
        color: #fff;
        font-size: 1rem;
        padding: 12px 24px;
        cursor: pointer;
        transition: background 0.2s ease, transform 0.15s ease;
      }
      .add-button:hover:not(:disabled) {
        background: #005fa3;
      }
      .add-button:active:not(:disabled) {
        transform: translateY(1px);
      }
      .add-button:disabled {
        background: #b5daf8;
        cursor: not-allowed;
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
      .footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.9rem;
        color: #555;
      }
    </style>
  </head>
  <body>
    <main class="app">
      <h1>Playwright Todo Demo</h1>
      <section class="input-row" data-testid="todo-input-row">
        <label class="sr-only" for="new-todo">Add a new todo</label>
        <input
          id="new-todo"
          class="new-todo"
          data-testid="todo-input"
          placeholder="What needs to be done?"
          aria-label="Add a new todo"
          autofocus
        />
        <button
          class="add-button"
          type="button"
          data-testid="add-todo-button"
        >
          Add
        </button>
      </section>
      <section class="controls" data-testid="todo-controls">
        <label class="sr-only" for="filter-text">Filter todos</label>
        <input
          id="filter-text"
          class="filter-text"
          data-testid="todo-filter-input"
          placeholder="Filter todos"
          aria-label="Filter todos"
        />
      </section>
      <ul class="todo-list" role="list" data-testid="todo-list"></ul>
      <div class="footer" data-testid="todo-footer">
        <span class="todo-count" data-testid="todo-count">0 items left</span>
        <nav class="filters" aria-label="Todo filters">
          <a
            href="#/"
            data-filter="all"
            data-testid="filter-all"
            class="active"
          >
            All
          </a>
          <a href="#/active" data-filter="active" data-testid="filter-active">
            Active
          </a>
          <a
            href="#/completed"
            data-filter="completed"
            data-testid="filter-completed"
          >
            Completed
          </a>
        </nav>
      </div>
    </main>
    <script>
      const newTodoInput = document.querySelector('.new-todo');
      const addButton = document.querySelector('.add-button');
      const filterTextInput = document.querySelector('.filter-text');
      const list = document.querySelector('.todo-list');
      const count = document.querySelector('.todo-count');
      const filters = document.querySelectorAll('.filters a');

      let todos = [];
      let activeFilter = 'all';
      let filterText = '';

      function render() {
        list.innerHTML = '';
        const filtered = todos.filter((todo) => {
          if (filterText && !todo.text.toLowerCase().includes(filterText)) {
            return false;
          }
          if (activeFilter === 'active') return !todo.completed;
          if (activeFilter === 'completed') return todo.completed;
          return true;
        });

        filtered.forEach((todo) => {
          const item = document.createElement('li');
          item.classList.toggle('completed', todo.completed);

          const checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.className = 'toggle';
          checkbox.setAttribute('data-testid', 'todo-toggle');
          checkbox.checked = todo.completed;
          checkbox.setAttribute('aria-label', `Toggle ${todo.text}`);

          const label = document.createElement('label');
          label.textContent = todo.text;

          checkbox.addEventListener('change', () => {
            todo.completed = checkbox.checked;
            updateCount();
            render();
          });

          item.setAttribute('data-testid', 'todo-item');
          item.append(checkbox, label);
          list.appendChild(item);
        });
      }

      function updateCount() {
        const remaining = todos.filter((todo) => !todo.completed).length;
        count.textContent = `${remaining} item${remaining === 1 ? '' : 's'} left`;
      }

      function updateAddButtonState() {
        addButton.disabled = newTodoInput.value.trim().length === 0;
      }

      function addTodo() {
        const text = newTodoInput.value.trim();
        if (!text) return;
        todos.push({ text, completed: false });
        newTodoInput.value = '';
        updateCount();
        render();
        updateAddButtonState();
        newTodoInput.focus();
      }

      newTodoInput.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
          event.preventDefault();
          addTodo();
        }
      });

      newTodoInput.addEventListener('input', updateAddButtonState);

      addButton.addEventListener('click', addTodo);

      filterTextInput.addEventListener('input', () => {
        filterText = filterTextInput.value.trim().toLowerCase();
        render();
      });

      filters.forEach((link) => {
        link.addEventListener('click', (event) => {
          event.preventDefault();
          activeFilter = link.dataset.filter;
          filters.forEach((other) => other.classList.toggle('active', other === link));
          render();
        });
      });

      updateAddButtonState();
      updateCount();
      render();
    </script>
  </body>
</html>

